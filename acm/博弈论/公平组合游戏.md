# 公平组合游戏

## 定义

如果一个游戏满足：

1. 有两名玩家交替行动
2. 在游戏进程的任意时刻，可以执行的合法行动与轮到哪名玩家无关
3. 不能行动的玩家判负

那么该游戏就是公平组合游戏

## 有向图游戏

给定一个有向无环图，图中有一个唯一的起点，在起点上放一枚棋子。两名玩家交替移动棋子，无法移动者判负。

**任何一个**公平组合游戏都可以转化为有向图游戏。可以将每个局面看成一个节点。

## $mex$运算

我们定义
$$
mex(S)=min_{x \in N ,x \notin S}{x}
$$

## $SG$函数

一个状态的$sg$函数是这个状态的一个表示。

我们定义
$$
SG(x) = mex\{sg(y)\}
$$
其中$y$是$x$的后继状态.

有向图游戏的某个局面必胜当且仅当该局面对应节点的$SG$函数大于$0$

有向图游戏的某个局面必败当且仅当该局面对应节点的$SG$函数等于$0$

我们可以这样打表

```c++
for(int i = 1; i <= n; ++i)
{
    memset(vis, 0, sizeof(vis));
    for(int y:nxt[i])	//y表示i的下一个局面
        vis[sg[y]] = 1;
    for(int j = 0; j <= n; ++j)
    {
        if(!vis[j])
        {
            sg[i] = j;
            break;
        }
	}
}
```



## 有向图游戏的和

$$
SG(G)=SG(G_1) \wedge  SG(G_2) \wedge \cdots \wedge SG(G_m)
$$



